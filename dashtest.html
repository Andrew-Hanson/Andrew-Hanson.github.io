<!DOCTYPE html>
<html>
<!-- 

        const newHeading = document.createElement("h1");
        newHeading.textContent = "Hello, World!";
        const newParagraph = document.createElement("p");
        newParagraph.textContent = "This is embedded HTML content" + playerObj.players.name;
        Math.floor(Math.random() * 4);
        Experience + Rounds Played
-->

<head>
    <style>
        .card {
            border: 1px solid #000000;
            background-color: rgb(163, 163, 197);
            border-radius: 12px;
            padding: 14px;
            margin-top: 12px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <button id="show">Show All</button>
    <button id="sum"> Display Funbucks Total of All Players </button>
    <button id="exp"> Show Player Experience</button>
    <button id="win"> Who's on a roll? </button>
    <button id="hit"> Generate a hand </button>

    <section id="showsec" class="card hidden">
        <strong> Who's playing the game? </strong>
        <ul id="players"> Players: </ul>
    </section>

    <section id="sumsec" class="card hidden">
        <strong> Funbucks In Circulation: </strong>
        <div id="container"> </div>
    </section>

    <section id="expsec" class="card hidden">
        <strong> How many rounds did they play? </strong>

        <h1> Green (less than 10) </h1>
        <div id="single"> </div>
        <h1> Yello (over 10) </h1>
        <div id="double"> </div>
        <h1>Redline (over 100) </h1>
        <div id="triple"> </div>
    </section>

    <section id="winsec" class="card hidden">
        <div id="winners"> </div>
    </section>


    <section id="hitsec" class="card hidden">
        <div id="hand"> </div>
    </section>



</body>

<script>
    const people = '{ "players": [' +
        '{"name":"John Smith", "rounds_played": 0, "funbucks": 1000, "winning_streak": 0},' +
        '{"name":"Average Joe", "rounds_played": 13, "funbucks": 2350,"winning_streak": 5},' +
        '{"name":"Slippin\' Jimmy","rounds_played": 33, "funbucks": 7350, "winning_streak": 7},' +
        '{"name":"Saul Gon","rounds_played": 20, "funbucks": 0, "winning_streak": 0},' +
        '{"name":"Robert House","rounds_played": 0, "funbucks": 999999, "winning_streak": 0},' +
        '{"name":"Leperchaun","rounds_played": 101, "funbucks": 100001, "winning_streak": 101},' +
        '{"name":"gambit","rounds_played": 80, "funbucks": 18950, "winning_streak": 38}]}';

    const cardsuits = '["spades", "diamonds", "hearts", "clubs"]';



    function enableFeature(buttonId, sectionId, setupFn) {
        const button = document.getElementById(buttonId);
        const section = document.getElementById(sectionId);
        button.addEventListener('click', () => {
            section.classList.remove('hidden');
            button.disabled = true;
            if (setupFn) setupFn();
        }, { once: true });
    }


    function showAllNames() {
        let playerObj = JSON.parse(people);
        var ulist = document.getElementById('players');

        for (let i = 0; i < playerObj.players.length; i++) {
            var entry = document.createElement('li');
            let nextname = playerObj.players[i].name;
            entry.appendChild(document.createTextNode(nextname));
            ulist.appendChild(entry);
        }
    }
    enableFeature("show", "showsec", showAllNames);


    function showFullSum() {
        let playerObj = JSON.parse(people);
        var display_total = document.createElement('p');
        var container = document.getElementById('container');

        var funbuck_total = 0;

        for (let i = 0; i < playerObj.players.length; i++) {
            let nextamount = playerObj.players[i].funbucks;
            funbuck_total += nextamount;
        }

        display_total.appendChild(document.createTextNode(funbuck_total));
        container.appendChild(display_total);

    }
    enableFeature("sum", "sumsec", showFullSum);

    function showRoundsEach() {
        let playerObj = JSON.parse(people);
        var rounds;

        for (let i = 0; i < playerObj.players.length; i++) {
            var p = document.createElement('p');

            var person = playerObj.players[i].name;
            var experience = playerObj.players[i].rounds_played;

            var rounds_sentence = document.createTextNode(person + ": " + experience);

            p.appendChild(rounds_sentence);

            if (playerObj.players[i].rounds_played < 10) {
                rounds = document.getElementById('single');
                rounds.style.color = 'green';
            } else if (playerObj.players[i].rounds_played >= 10 && playerObj.players[i].rounds_played < 100) {
                rounds = document.getElementById('double');
                rounds.style.color = 'yellow';
            } else if (playerObj.players[i].rounds_played >= 100) {
                rounds = document.getElementById('triple');
                rounds.style.color = 'red';
            }

            rounds.appendChild(p);
        }
    }
    enableFeature("exp", "expsec", showRoundsEach);

    function showOnlyWins() {
        let playerObj = JSON.parse(people);

        var win_container = document.getElementById("winners");
        for (let i = 0; i < playerObj.players.length; i++) {
            var streak = playerObj.players[i].winning_streak;

            if (streak > 0) {

                var p = document.createElement('p');
                var person = playerObj.players[i].name;
                var winsen = document.createTextNode(person + ": " + streak);

                p.appendChild(winsen);
                p.style.fontStyle = 'italic';

                if (streak > 10) {
                    p.style.color = '#F54927';
                    p.style.fontWeight = 'bold';

                }

                win_container.appendChild(p);
            }

        }
    }
    enableFeature("win", "winsec", showOnlyWins);



    function createRandomHand() {
        let cardObj = JSON.parse(cardsuits);
        let currenthand = document.getElementById("hand");

        for (var i = 0; i < Math.floor(Math.random() * 4) + 1; i++) {
            let randosuit = Math.floor(Math.random() * 4);
            let p = document.createElement('p');
            var enter_card = document.createTextNode(cardObj[randosuit]);

            if (randosuit == 0) {
                p.style.fontweight = "bold";
            } else if (randosuit == 1) {
                p.style.fontStyle = "italic";
            } else if (randosuit == 2) {
                p.style.color = "red";
            } else {
                p.style.fontSize = "125%";
            }

            p.appendChild(enter_card);


            currenthand.appendChild(p);
        }
    }
    enableFeature("hit", "hitsec", createRandomHand);



</script>

</html>